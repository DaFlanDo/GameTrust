{% extends 'admin/admin_base.html' %}

{% block content %}
<h1 class="text-3xl font-bold text-white mb-8">Пользователи</h1>

<form method="get" class="mb-6 flex gap-4">
  <input type="text" name="q" placeholder="Поиск по имени или email"
         value="{{ search }}" class="px-4 py-2 rounded bg-gray-800 text-white w-80">
  <button type="submit" class="bg-accent text-white px-4 py-2 rounded">Поиск</button>
</form>

<div class="overflow-x-auto">
  <table class="w-full text-left bg-dark rounded-xl overflow-hidden shadow">
    <thead class="bg-gray-800 text-gray-400 text-sm uppercase">
      <tr>
        <th class="px-4 py-3">ID</th>
        <th class="px-4 py-3">Имя</th>
        <th class="px-4 py-3">Email</th>
        <th class="px-4 py-3">Баланс</th>
        <th class="px-4 py-3">Холд</th>
        <th class="px-4 py-3">Регистрация</th>
        <th class="px-4 py-3">Действия</th>
      </tr>
    </thead>
    <tbody class="text-gray-300">
      {% for user in users %}
      <tr class="border-t border-gray-700 hover:bg-gray-800">
        <td class="px-4 py-3">{{ user.id }}</td>
        <td class="px-4 py-3">{{ user.username }}</td>
        <td class="px-4 py-3">{{ user.email }}</td>
        <td class="px-4 py-3">{{ user.balance }} ₽</td>
        <td class="px-4 py-3">{{ user.hold_balance }} ₽</td>
        <td class="px-4 py-3">{{ user.created_at.strftime('%d.%m.%Y') }}</td>
        <td class="px-4 py-3">
          <a href="{{ url_for('admin.edit_user', user_id=user.id) }}" class="text-accent hover:underline">Просмотр</a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}